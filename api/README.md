# Amsterdam API

# Deployment & Testing

Make sure you have the `blue` AWS profile on your system.

```bash
npm run init
npm run deploy
```

After each deployment, test the API still works:

```bash
npm run test
```

# Documentation

* *Authentication*: Send this header `Authorization: Bearer xxx` with the token generated by the Google Oauth client.

* *Testing*: Send this header `Authorization: Bearer blue@putazo.com`. It will always be accepted, but you will be authenticated as the test user.

* `Error 400`: Indicates user input error.

* `Error 401`: Indicates a problem with the Googla Oauth token.

* `Error 403`: Indicates a permission issue, such as trying to update a list that you are not part of.

* `Error 404`: Indicates an object does not exist. Most of the times, it indicates the list `id` is invalid.

* *GET* `v1/lists`: Get all the lists you have access to.

```bash
{
    "lists": [
        {"id": "123", "name": "Lorem Ipsum", "createdAt": "...", "owner": "bluw@putazo.com"},
        {"id": "123", "name": "Lorem Ipsum", "createdAt": "...", "owner": "bluw@putazo.com"}
    ]
}
```

* *POST* `v1/lists`: Create a new list as the owner.

```json
{
    "name": "Lorem Ipsum"
}
```

* *DELETE* `v1/lists/:id`: Delete a list, if you are a member.

* *GET* `v1/lists/:id/users`: Get a list of all the users with access to this list.

```bash
{
    "members": [
        {"email": "blue@putazo.com"},
        {"email": "blue@trolaso.com"}
    ]
}
```

* *POST* `v1/lists/:id/users/:email`: Add a user to this list.

* *DELETE* `v1/lists/:id/users/:email`: Delete member from list.

* *GET* `v1/lists/:id/items`: Get all the items in a list.

```bash
{
    "items": [
        {"text": "Lorem Ipsum"},
        {"text": "Lorem Ipsum"}
    ]
}
```

* *PUT* `v1/lists/:id/items`: Update a list with the new set of items.

```bash
{
    "items": [
        {"text": "Lorem Ipsum"},
        {"text": "Lorem Ipsum"}
    ]
}
```